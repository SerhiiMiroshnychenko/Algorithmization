import math

# Константа точності
EPS = 1e-9

# ============================================================
# ПРАКТИЧНА РОБОТА №2
# Варіант 23
# ============================================================
print("=" * 60)
print("ПРАКТИЧНА РОБОТА №2: ІТЕРАЦІЙНІ ОБЧИСЛЕННЯ")
print("Варіант 23")
print("=" * 60)

print("\nФункція: y = exp(-x²)/√(x²+1) + arctan(x)")
print("ОДЗ: функція визначена для всіх x")
print("-" * 60)

# ============================================================
# ЧАСТИНА 1: ВВЕДЕННЯ ВИХІДНИХ ДАНИХ
# ============================================================
print("\n--- ВВЕДЕННЯ ВИХІДНИХ ДАНИХ ---")
x_start = float(input("Введіть початкове значення x_start: "))
x_end = float(input("Введіть кінцеве значення x_end: "))
h = float(input("Введіть крок табуляції h: "))

# ============================================================
# ЧАСТИНА 2: ТАБУЛЯЦІЯ ФУНКЦІЇ
# ============================================================
print("\n--- ТАБУЛЯЦІЯ ФУНКЦІЇ ---")

# Ініціалізація списку
y_list = []

# Виведення заголовка таблиці
print(f"\n{'№':>5} | {'x':>12} | {'y':>15}")
print("-" * 40)

# Лічильник точок
point_number = 0

# Цикл табуляції
x = x_start
while x <= x_end + EPS:
    # Обчислення функції (ОДЗ завжди виконана)
    y = math.exp(-x * x) / math.sqrt(x * x + 1) + math.atan(x)

    # Збереження значення у список
    y_list.append(y)

    # Виведення результату
    point_number += 1
    print(f"{point_number:5d} | {x:12.6f} | {y:15.8f}")

    # Перехід до наступної точки
    x += h

print("-" * 40)
print(f"Загальна кількість точок: {len(y_list)}")

# ============================================================
# ЧАСТИНА 3: ОБРОБКА СПИСКУ
# ============================================================
print("\n--- ОБРОБКА СПИСКУ ЗНАЧЕНЬ ---")

if len(y_list) > 0:
    # Пошук максимуму та мінімуму
    max_y = y_list[0]
    min_y = y_list[0]

    for y in y_list:
        if y > max_y:
            max_y = y
        if y < min_y:
            min_y = y

    # Обчислення суми та середнього
    total = 0.0
    for y in y_list:
        total += y

    average = total / len(y_list)

    # Виведення основних результатів
    print(f"\n{'=' * 60}")
    print("ОСНОВНА СТАТИСТИКА:")
    print(f"{'=' * 60}")
    print(f"Максимальне значення y: {max_y:.8f}")
    print(f"Мінімальне значення y: {min_y:.8f}")
    print(f"Сума всіх елементів: {total:.8f}")
    print(f"Середнє арифметичне: {average:.8f}")

    # ============================================================
    # ДОДАТКОВА УМОВА: сума елементів в інтервалі [min; avg]
    # ============================================================
    print(f"\n{'=' * 60}")
    print("ДОДАТКОВА УМОВА:")
    print(f"Сума елементів в інтервалі [{min_y:.4f}; {average:.4f}]")
    print(f"{'=' * 60}")

    sum_interval = 0.0
    count_interval = 0

    for y in y_list:
        if min_y - EPS <= y <= average + EPS:
            sum_interval += y
            count_interval += 1

    print(f"\nКількість елементів в інтервалі: {count_interval}")
    print(f"Сума елементів в інтервалі [min; avg]: {sum_interval:.8f}")

else:
    print("Список порожній. Немає даних для обробки.")

print(f"\n{'=' * 60}")
print("ПРОГРАМУ ЗАВЕРШЕНО")
print(f"{'=' * 60}")
